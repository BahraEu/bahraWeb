_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{10:function(e,t,r){r("J5xr"),e.exports=r("nOHt")},"8Bbg":function(e,t,r){e.exports=r("B5Ud")},B5Ud:function(e,t,r){"use strict";var n=r("o0o1"),o=r("lwsE"),i=r("W8MJ"),a=r("7W2i"),s=r("a1gu"),c=r("Nsbk"),u=r("yXPU");function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}var l=r("TqRt");t.__esModule=!0,t.Container=function(e){0;return e.children},t.createUrl=y,t.default=void 0;var d=l(r("q1tI")),f=r("g/15");function g(e){return h.apply(this,arguments)}function h(){return(h=u(n.mark((function e(t){var r,o,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.Component,o=t.ctx,e.next=3,(0,f.loadGetInitialProps)(r,o);case 3:return i=e.sent,e.abrupt("return",{pageProps:i});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.AppInitialProps=f.AppInitialProps,t.NextWebVitalsMetric=f.NextWebVitalsMetric;var v=function(e){a(r,e);var t=p(r);function r(){return o(this,r),t.apply(this,arguments)}return i(r,[{key:"componentDidCatch",value:function(e,t){throw e}},{key:"render",value:function(){var e=this.props,t=e.router,r=e.Component,n=e.pageProps,o=e.__N_SSG,i=e.__N_SSP;return d.default.createElement(r,Object.assign({},n,o||i?{}:{url:y(t)}))}}]),r}(d.default.Component);function y(e){var t=e.pathname,r=e.asPath,n=e.query;return{get query(){return n},get pathname(){return t},get asPath(){return r},back:function(){e.back()},push:function(t,r){return e.push(t,r)},pushTo:function(t,r){var n=r?t:"",o=r||t;return e.push(n,o)},replace:function(t,r){return e.replace(t,r)},replaceTo:function(t,r){var n=r?t:"",o=r||t;return e.replace(n,o)}}}t.default=v,v.origGetInitialProps=g,v.getInitialProps=g},"D7+1":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShopStore=void 0;var n=r("99Ma"),o=r("gJpS"),i=r("XziM"),a=r("g+r8");t.ShopStore=n.types.model("ShopStore",{prodoctStore:n.types.optional(o.ProdoctStore,{prodocts:{}}),cart:n.types.optional(i.CartStore,{entries:[]}),view:n.types.optional(a.ViewStore,{})}).views((function(e){return{get getProduct(){return n.getEnv(e).getProduct},get alert(){return n.getEnv(e).alert},get isLoading(){return e.prodoctStore.isLoading},get prodocts(){return e.prodoctStore.prodocts},get sortedAvailableProdocts(){return e.prodoctStore.sortedAvailableProdocts}}})).actions((function(e){return{afterCreate:function(){e.prodoctStore.loadProdocts()}}}))},J5xr:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r("YNMu")}])},URgk:function(e,t,r){(function(e){var n="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r("YBdB"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r("ntbh"))},XziM:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartStore=void 0;var n=r("aFzQ"),o=r("99Ma"),i=r("gJpS"),a=o.types.model("CartEntry",{quantity:0,prodoct:o.types.reference(i.Prodoct)}).views((function(e){return{get price(){return e.prodoct.price*e.quantity},get isValidProdoct(){return e.prodoct.isAvailable}}})).actions((function(e){return{increaseQuantity:function(t){e.quantity+=t},setQuantity:function(t){e.quantity=t},remove:function(){o.getParent(e,2).remove(e)}}}));t.CartStore=o.types.model("CartStore",{entries:o.types.array(a)}).views((function(e){return{get shop(){return o.getParent(e)},get subTotal(){return e.entries.reduce((function(e,t){return e+t.price}),0)},get hasDiscount(){return e.subTotal>=100},get discount(){return e.subTotal*(e.hasDiscount?.1:0)},get total(){return e.subTotal-e.discount},get canCheckout(){return e.entries.length>0&&e.entries.every((function(e){return e.quantity>0&&e.isValidProdoct}))}}})).actions((function(e){return{afterAttach:function(){window.localStorage&&n.when((function(){return!e.shop.isLoading}),(function(){e.readFromLocalStorage(),n.reaction((function(){return o.getSnapshot(e)}),(function(e){window.localStorage.setItem("cart",JSON.stringify(e))}))}))},addProdoct:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.entries.find((function(e){return e.prodoct===t}));o||(e.entries.push({prodoct:t}),o=e.entries[e.entries.length-1]),o.increaseQuantity(r),n&&e.shop.alert("Added to cart")},remove:function(e){o.destroy(e)},checkout:function(e){var t=e.total;e.clear(),e.shop.alert("Bought prodocts for ".concat(t," \u20ac !"))},clear:function(){e.entries.clear()},readFromLocalStorage:function(){var t=window.localStorage.getItem("cart");t&&o.applySnapshot(e,JSON.parse(t))}}}))},YBdB:function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,o=1,i={},a=!1,s=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&p(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),n=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){p(e.data)},n=function(t){e.port2.postMessage(t)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var e=s.documentElement;n=function(t){var r=s.createElement("script");r.onreadystatechange=function(){p(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():n=function(e){setTimeout(p,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return i[o]=a,n(o),o++},c.clearImmediate=u}function u(e){delete i[e]}function p(e){if(a)setTimeout(p,0,e);else{var t=i[e];if(t){a=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{u(e),a=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r("ntbh"),r("8oxB"))},YNMu:function(e,t,r){"use strict";var n=r("lSNA"),o=r("nKUr"),i=r("o0o1"),a=r("yXPU"),s=r("lwsE"),c=r("W8MJ"),u=r("7W2i"),p=r("a1gu"),l=r("Nsbk");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}var h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});h(r("q1tI"));var v=h(r("8Bbg")),y=r("Uuew"),m=r("TyAF"),S=r("k7Sn"),P=h(r("5IwB")),b=h(r("g4pe")),w=r("H8nO"),_=r("lSxn"),I=h(r("FL+C")),x=h(r("665D")),O=r("vi9s"),j=r("20a2"),k=r("mwnj"),M=r("aoTL");M.enableStaticRendering(!1),M.enableStaticRendering(!0),M.enableStaticRendering(!1);var T=function(e){u(n,e);var t=g(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).state={user:null,users:void 0,isLogedIn:!1,width:"",height:""},r.user=a(i.mark((function e(){var t;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_.isEmpty(r.props.pageProps.userID)||(t=r.props.pageProps.userID,r.props.apolloClient.query({query:k.WP_USER,variables:{id:t}}).then(function(){var e=a(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.user,e.next=3,r.mobxStore.userStore.createUser(n);case 3:return r.setState(!0),e.abrupt("return",{user:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)})));case 1:case"end":return e.stop()}}),e)}))),r.mobxStore=w.isServer?e.pageProps.RootState:O.initializeStore(e.pageProps.RootState),r}return c(n,[{key:"handleResize",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){var e=a(i.mark((function e(){var t,r;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state.user,_.isEmpty(t)?this.user():this.setState({isLogedIn:!0}),(r=document.querySelector("#jss-server-side"))&&r.parentNode&&r.parentNode.removeChild(r);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.Component,n=e.pageProps,i=e.apolloClient;console.log("MyApp this.mobxStore",this.mobxStore),console.log("MyApp this.props",this.props),console.log("MyApp State",this.state);var a=r("zpok");return o.jsxs(o.Fragment,{children:[o.jsxs(b.default,{children:[o.jsx("title",{children:"Hello, BAHRA"}),o.jsx("link",{rel:"shortcut icon",href:a})]}),o.jsx(m.Provider,{store:this.mobxStore,children:o.jsx(y.ApolloProvider,{client:i,children:o.jsx(x.default,f(f({user:this.state.user},n),{},{Component:t,pageProps:n}))})})]})}}],[{key:"getInitialProps",value:function(){var e=a(i.mark((function e(t){var r,n,o,a,s,c,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.Component,n=t.ctx,o=w.isServer?I.default(n.req).userID:localStorage.getItem("userID"),a=w.isServer?I.default(n.req).language:localStorage.getItem("language"),s=O.initializeStore(),n.mobxStore=s,c={Language:a,userID:o,RootState:s,router:j.Router},u=Object.assign({},c),!r.getInitialProps){e.next=12;break}return e.next=10,r.getInitialProps(Object.assign(Object.assign({},c),n));case 10:u=e.sent,u=Object.assign(Object.assign({},c),u);case 12:return e.abrupt("return",{pageProps:u});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(v.default);t.default=P.default(S.appWithTranslation(T))},"g+r8":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewStore=void 0;var n=r("99Ma");t.ViewStore=n.types.model({page:"prodocts",selectedProdoctId:""}).views((function(e){return{get shop(){return n.getParent(e)},get isLoading(){return e.shop.isLoading},get currentUrl(){switch(e.page){case"prodocts":return"/";case"prodoct":return"/prodoct/"+e.selectedProdoctId;case"cart":return"/cart";default:return"/404"}},get selectedProdoct(){return e.isLoading||!e.selectedProdoctId?null:e.shop.prodocts.get(e.selectedProdoctId)}}})).actions((function(e){return{openProdoctsPage:function(){e.page="prodocts",e.selectedProdoctId=""},openProdoctPage:function(t){e.page="prodoct",e.selectedProdoctId=t.id},openProdoctPageById:function(t){e.page="prodoct",e.selectedProdoctId=t},openCartPage:function(){e.page="cart",e.selectedProdoctId=""}}}))},gJpS:function(e,t,r){"use strict";var n=r("o0o1");Object.defineProperty(t,"__esModule",{value:!0}),t.ProdoctStore=t.Prodoct=void 0;var o=r("aFzQ"),i=r("99Ma");t.Prodoct=i.types.model("Prodoct",{id:i.types.identifier,name:i.types.string,author:i.types.string,series_t:i.types.optional(i.types.string,""),sequence_i:i.types.number,genre_s:i.types.string,pages_i:i.types.number,price:i.types.number,isAvailable:!0}),t.ProdoctStore=i.types.model("ProdoctStore",{isLoading:!0,prodocts:i.types.map(t.Prodoct)}).views((function(e){return{get shop(){return i.getParent(e)},get sortedAvailableProdocts(){return o.values(e.prodocts).filter((function(e){return e.isAvailable})).sort((function(e,t){return e.name>t.name?1:e.name===t.name?0:-1}))}}})).actions((function(e){function t(t){o.values(e.prodocts).forEach((function(e){return e.isAvailable=!1})),t.forEach((function(t){e.prodocts.put(t),e.prodocts.get(t.id).isAvailable=!0}))}var r=i.flow(n.mark((function r(o){return n.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:try{t(o),n=!1,e.isLoading=n}catch(i){console.error("Failed to load prodocts ",i)}case 1:case"end":return r.stop()}var n}),r)})));return{updateProdocts:t,loadProdocts:r}}))},kUOx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=t.wpUser=void 0;var n=r("99Ma");t.wpUser=n.types.model("User",{id:n.types.identifier,userId:n.types.integer}),t.UserStore=n.types.model("UserStore",{identifier:n.types.optional(n.types.identifier,"UserStore"),users:n.types.map(t.wpUser)}).actions((function(e){return{createUser:function(r){var n=t.wpUser.create(Object.assign(Object.assign({},r),{id:"user_".concat(r.id)}));return e.users.set(n.id,n),n},createOrGetUser:function(t){var r=e.users.get("user_".concat(t.id));return r||e.users.createUser(t)}}}))},vi9s:function(e,t,r){"use strict";var n=r("o0o1"),o=r("yXPU");this&&this.__importDefault;Object.defineProperty(t,"__esModule",{value:!0}),t.useStore=t.initializeStore=void 0;var i,a=r("q1tI"),s=r("99Ma"),c=r("kUOx"),u=r("D7+1"),p=s.types.model("RootStore",{identifier:s.types.optional(s.types.identifier,"RootStore"),userStore:s.types.optional(c.UserStore,(function(){return c.UserStore.create({users:{}})})),shopStore:s.types.optional(u.ShopStore,(function(){return u.ShopStore.create({})}))}).actions((function(e){return{afterCreate:function(){e.shopStore.prodocts},save:function(){return o(n.mark((function t(){var r,o;return n.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=s.getSnapshot(e),o=JSON.stringify(r),t.next=5,localStorage.setItem("appStatePersistenceKey",o);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("unexpected error "+t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}}));function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null!==i&&void 0!==i?i:p.create({userStore:{}});return e&&(console.log("snapshot"),s.applySnapshot(t,e)),console.log("Create the store once in the client"),i||(i=t),i}t.initializeStore=l,t.useStore=function(e){return a.useMemo((function(){return l(e)}),[e])}},zpok:function(e,t){e.exports="/_next/static/images/bahra-icon-120x120-47ba823f006b805b4eb7aa023d7ee010.png"}},[[10,1,2,3,8,12,24,0,4,5,6,7,10,11,13,14,23]]]);