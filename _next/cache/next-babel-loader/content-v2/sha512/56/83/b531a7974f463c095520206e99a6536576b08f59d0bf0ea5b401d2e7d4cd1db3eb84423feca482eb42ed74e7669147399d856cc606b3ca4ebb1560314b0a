{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxDevRuntime = require(\"react/jsx-dev-runtime\");\n\nvar _jsxFileName = \"/home/rami/BHARA/BahraPro/BahraPro/src/components/bahra/HomePage/Subscription/Subscription.jsx\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable jsx-a11y/label-has-for */\n\nconst react_1 = __importDefault(require(\"react\"));\n\nconst react_hooks_1 = require(\"@apollo/react-hooks\");\n\nconst formik_1 = require(\"formik\");\n\nconst Yup = __importStar(require(\"yup\"));\n\nconst lodash_get_1 = __importDefault(require(\"lodash.get\"));\n\nconst SUBSCRIBE_graphql_1 = __importDefault(require(\"./SUBSCRIBE.graphql\"));\n\nconst SUBSCRIPTIONS_graphql_1 = __importDefault(require(\"../SubscriptionsTable/SUBSCRIPTIONS.graphql\"));\n\nconst style_1 = require(\"./style\");\n\nconst Typography_1 = require(\"../../../../styles/Typography\");\n\nconst i18n_1 = require(\"../../../../../i18n\");\n\nconst handleSubsribe = async ({\n  values,\n  subscribeMutation,\n  resetForm\n}) => {\n  const subscribeResult = await subscribeMutation({\n    variables: {\n      input: Object.assign({\n        source: 'HOME_PAGE'\n      }, values)\n    }\n  });\n\n  if (lodash_get_1.default(subscribeResult, 'data.subscribe')) {\n    resetForm();\n  }\n\n  return subscribeResult;\n};\n\nconst Subscription = props => {\n  const t = props.t;\n  const [subscribeMutation] = react_hooks_1.useMutation(SUBSCRIBE_graphql_1.default, {\n    update: (cache, {\n      data\n    }) => {\n      const dataResult = cache.readQuery({\n        query: SUBSCRIPTIONS_graphql_1.default\n      });\n      cache.writeQuery({\n        query: SUBSCRIPTIONS_graphql_1.default,\n        data: {\n          subscriptions: dataResult && dataResult.subscriptions && dataResult.subscriptions.concat([data && data.subscribe])\n        }\n      });\n    }\n  });\n  const initialValues = {\n    email: ''\n  };\n  return /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(_reactJsxDevRuntime.Fragment, {\n    children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscriptionStyle, {\n      children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscriptionWrapper, {\n        children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(Typography_1.H3, {\n          children: t('Bahra-news-litter')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.Formik, {\n          initialValues: initialValues,\n          onSubmit: async (values, {\n            resetForm\n          }) => handleSubsribe({\n            values,\n            subscribeMutation,\n            resetForm\n          }),\n          validationSchema: Yup.object().shape({\n            email: Yup.string().email().required('Before submitting you need to provide your email')\n          }),\n          children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.Form, {\n            children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Row, {\n              children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Label, {\n                htmlFor: \"email\",\n                children: [\"Email\", /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Input, {\n                  id: \"email\",\n                  name: \"email\",\n                  placeholder: \"your@email.com\",\n                  type: \"email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscribeButton, {\n                type: \"submit\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.FieldErrorRow, {\n              children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.ErrorMessage, {\n                name: \"email\",\n                component: \"div\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n\nexports.default = i18n_1.withTranslation('common')(Subscription);","map":{"version":3,"sources":["../../../../../../src/components/bahra/HomePage/Subscription/Subscription.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable jsx-a11y/label-has-for */\nconst react_1 = __importDefault(require(\"react\"));\nconst react_hooks_1 = require(\"@apollo/react-hooks\");\nconst formik_1 = require(\"formik\");\nconst Yup = __importStar(require(\"yup\"));\nconst lodash_get_1 = __importDefault(require(\"lodash.get\"));\nconst SUBSCRIBE_graphql_1 = __importDefault(require(\"./SUBSCRIBE.graphql\"));\nconst SUBSCRIPTIONS_graphql_1 = __importDefault(require(\"../SubscriptionsTable/SUBSCRIPTIONS.graphql\"));\nconst style_1 = require(\"./style\");\nconst Typography_1 = require(\"../../../../styles/Typography\");\nconst i18n_1 = require(\"../../../../../i18n\");\nconst handleSubsribe = async ({ values, subscribeMutation, resetForm, }) => {\n    const subscribeResult = await subscribeMutation({\n        variables: {\n            input: Object.assign({ source: 'HOME_PAGE' }, values),\n        },\n    });\n    if (lodash_get_1.default(subscribeResult, 'data.subscribe')) {\n        resetForm();\n    }\n    return subscribeResult;\n};\nconst Subscription = (props) => {\n    const t = props.t;\n    const [subscribeMutation] = react_hooks_1.useMutation(SUBSCRIBE_graphql_1.default, {\n        update: (cache, { data }) => {\n            const dataResult = cache.readQuery({ query: SUBSCRIPTIONS_graphql_1.default });\n            cache.writeQuery({\n                query: SUBSCRIPTIONS_graphql_1.default,\n                data: {\n                    subscriptions: dataResult &&\n                        dataResult.subscriptions &&\n                        dataResult.subscriptions.concat([data && data.subscribe]),\n                },\n            });\n        },\n    });\n    const initialValues = {\n        email: '',\n    };\n    return (<>\n            <style_1.SubscriptionStyle>\n                <style_1.SubscriptionWrapper>\n                    <Typography_1.H3>\n                        {t('Bahra-news-litter')}\n                    </Typography_1.H3>\n                    <formik_1.Formik initialValues={initialValues} onSubmit={async (values, { resetForm }) => handleSubsribe({\n        values,\n        subscribeMutation,\n        resetForm,\n    })} validationSchema={Yup.object().shape({\n        email: Yup.string()\n            .email()\n            .required('Before submitting you need to provide your email'),\n    })}>\n                        <formik_1.Form>\n                            <style_1.Row>\n                                <style_1.Label htmlFor=\"email\">\n                                    Email\n                                    <style_1.Input id=\"email\" name=\"email\" placeholder=\"your@email.com\" type=\"email\"/>\n                                </style_1.Label>\n                                <style_1.SubscribeButton type=\"submit\">Submit</style_1.SubscribeButton>\n                            </style_1.Row>\n                            <style_1.FieldErrorRow>\n                                <formik_1.ErrorMessage name=\"email\" component=\"div\"/>\n                            </style_1.FieldErrorRow>\n                        </formik_1.Form>\n                    </formik_1.Formik>\n                </style_1.SubscriptionWrapper>\n            </style_1.SubscriptionStyle>\n        </>);\n};\nexports.default = i18n_1.withTranslation('common')(Subscription);\n//# sourceMappingURL=Subscription.jsx.map"]},"metadata":{},"sourceType":"script"}