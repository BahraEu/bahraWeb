{"ast":null,"code":"\"use strict\";\n\nvar _reactJsxDevRuntime = require(\"react/jsx-dev-runtime\");\n\nvar _slicedToArray = require(\"/home/rami/BHARA/BahraPro/BahraPro/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar _regeneratorRuntime = require(\"/home/rami/BHARA/BahraPro/BahraPro/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/home/rami/BHARA/BahraPro/BahraPro/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _jsxFileName = \"/home/rami/BHARA/BahraPro/BahraPro/src/components/bahra/HomePage/Subscription/Subscription.jsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* eslint-disable jsx-a11y/label-has-for */\n\nvar react_1 = __importDefault(require(\"react\"));\n\nvar react_hooks_1 = require(\"@apollo/react-hooks\");\n\nvar formik_1 = require(\"formik\");\n\nvar Yup = __importStar(require(\"yup\"));\n\nvar lodash_get_1 = __importDefault(require(\"lodash.get\"));\n\nvar SUBSCRIBE_graphql_1 = __importDefault(require(\"./SUBSCRIBE.graphql\"));\n\nvar SUBSCRIPTIONS_graphql_1 = __importDefault(require(\"../SubscriptionsTable/SUBSCRIPTIONS.graphql\"));\n\nvar style_1 = require(\"./style\");\n\nvar Typography_1 = require(\"../../../../styles/Typography\");\n\nvar i18n_1 = require(\"../../../../../i18n\");\n\nvar handleSubsribe = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var values, subscribeMutation, resetForm, subscribeResult;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            values = _ref.values, subscribeMutation = _ref.subscribeMutation, resetForm = _ref.resetForm;\n            _context.next = 3;\n            return subscribeMutation({\n              variables: {\n                input: Object.assign({\n                  source: 'HOME_PAGE'\n                }, values)\n              }\n            });\n\n          case 3:\n            subscribeResult = _context.sent;\n\n            if (lodash_get_1[\"default\"](subscribeResult, 'data.subscribe')) {\n              resetForm();\n            }\n\n            return _context.abrupt(\"return\", subscribeResult);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function handleSubsribe(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar Subscription = function Subscription(props) {\n  _s();\n\n  var t = props.t;\n\n  var _react_hooks_1$useMut = react_hooks_1.useMutation(SUBSCRIBE_graphql_1[\"default\"], {\n    update: function update(cache, _ref3) {\n      var data = _ref3.data;\n      var dataResult = cache.readQuery({\n        query: SUBSCRIPTIONS_graphql_1[\"default\"]\n      });\n      cache.writeQuery({\n        query: SUBSCRIPTIONS_graphql_1[\"default\"],\n        data: {\n          subscriptions: dataResult && dataResult.subscriptions && dataResult.subscriptions.concat([data && data.subscribe])\n        }\n      });\n    }\n  }),\n      _react_hooks_1$useMut2 = _slicedToArray(_react_hooks_1$useMut, 1),\n      subscribeMutation = _react_hooks_1$useMut2[0];\n\n  var initialValues = {\n    email: ''\n  };\n  return /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(_reactJsxDevRuntime.Fragment, {\n    children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscriptionStyle, {\n      children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscriptionWrapper, {\n        children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(Typography_1.H3, {\n          children: t('Bahra-news-litter')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, _this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.Formik, {\n          initialValues: initialValues,\n          onSubmit: /*#__PURE__*/function () {\n            var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values, _ref4) {\n              var resetForm;\n              return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n                while (1) {\n                  switch (_context2.prev = _context2.next) {\n                    case 0:\n                      resetForm = _ref4.resetForm;\n                      return _context2.abrupt(\"return\", handleSubsribe({\n                        values: values,\n                        subscribeMutation: subscribeMutation,\n                        resetForm: resetForm\n                      }));\n\n                    case 2:\n                    case \"end\":\n                      return _context2.stop();\n                  }\n                }\n              }, _callee2);\n            }));\n\n            return function (_x2, _x3) {\n              return _ref5.apply(this, arguments);\n            };\n          }(),\n          validationSchema: Yup.object().shape({\n            email: Yup.string().email().required('Before submitting you need to provide your email')\n          }),\n          children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.Form, {\n            children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Row, {\n              children: [/*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Label, {\n                htmlFor: \"email\",\n                children: [\"Email\", /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.Input, {\n                  id: \"email\",\n                  name: \"email\",\n                  placeholder: \"your@email.com\",\n                  type: \"email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 84,\n                  columnNumber: 37\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 82,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.SubscribeButton, {\n                type: \"submit\",\n                children: \"Submit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 29\n            }, _this), /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(style_1.FieldErrorRow, {\n              children: /*#__PURE__*/_reactJsxDevRuntime.jsxDEV(formik_1.ErrorMessage, {\n                name: \"email\",\n                component: \"div\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 29\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, _this)\n  }, void 0, false);\n};\n\n_s(Subscription, \"01FSNcRukKxENOTnUV/B1o4Yuro=\", false, function () {\n  return [react_hooks_1.useMutation];\n});\n\n_c = Subscription;\nexports[\"default\"] = i18n_1.withTranslation('common')(Subscription);\n\nvar _c;\n\n$RefreshReg$(_c, \"Subscription\");","map":{"version":3,"sources":["../../../../../../src/components/bahra/HomePage/Subscription/Subscription.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable jsx-a11y/label-has-for */\nconst react_1 = __importDefault(require(\"react\"));\nconst react_hooks_1 = require(\"@apollo/react-hooks\");\nconst formik_1 = require(\"formik\");\nconst Yup = __importStar(require(\"yup\"));\nconst lodash_get_1 = __importDefault(require(\"lodash.get\"));\nconst SUBSCRIBE_graphql_1 = __importDefault(require(\"./SUBSCRIBE.graphql\"));\nconst SUBSCRIPTIONS_graphql_1 = __importDefault(require(\"../SubscriptionsTable/SUBSCRIPTIONS.graphql\"));\nconst style_1 = require(\"./style\");\nconst Typography_1 = require(\"../../../../styles/Typography\");\nconst i18n_1 = require(\"../../../../../i18n\");\nconst handleSubsribe = async ({ values, subscribeMutation, resetForm, }) => {\n    const subscribeResult = await subscribeMutation({\n        variables: {\n            input: Object.assign({ source: 'HOME_PAGE' }, values),\n        },\n    });\n    if (lodash_get_1.default(subscribeResult, 'data.subscribe')) {\n        resetForm();\n    }\n    return subscribeResult;\n};\nconst Subscription = (props) => {\n    const t = props.t;\n    const [subscribeMutation] = react_hooks_1.useMutation(SUBSCRIBE_graphql_1.default, {\n        update: (cache, { data }) => {\n            const dataResult = cache.readQuery({ query: SUBSCRIPTIONS_graphql_1.default });\n            cache.writeQuery({\n                query: SUBSCRIPTIONS_graphql_1.default,\n                data: {\n                    subscriptions: dataResult &&\n                        dataResult.subscriptions &&\n                        dataResult.subscriptions.concat([data && data.subscribe]),\n                },\n            });\n        },\n    });\n    const initialValues = {\n        email: '',\n    };\n    return (<>\n            <style_1.SubscriptionStyle>\n                <style_1.SubscriptionWrapper>\n                    <Typography_1.H3>\n                        {t('Bahra-news-litter')}\n                    </Typography_1.H3>\n                    <formik_1.Formik initialValues={initialValues} onSubmit={async (values, { resetForm }) => handleSubsribe({\n        values,\n        subscribeMutation,\n        resetForm,\n    })} validationSchema={Yup.object().shape({\n        email: Yup.string()\n            .email()\n            .required('Before submitting you need to provide your email'),\n    })}>\n                        <formik_1.Form>\n                            <style_1.Row>\n                                <style_1.Label htmlFor=\"email\">\n                                    Email\n                                    <style_1.Input id=\"email\" name=\"email\" placeholder=\"your@email.com\" type=\"email\"/>\n                                </style_1.Label>\n                                <style_1.SubscribeButton type=\"submit\">Submit</style_1.SubscribeButton>\n                            </style_1.Row>\n                            <style_1.FieldErrorRow>\n                                <formik_1.ErrorMessage name=\"email\" component=\"div\"/>\n                            </style_1.FieldErrorRow>\n                        </formik_1.Form>\n                    </formik_1.Formik>\n                </style_1.SubscriptionWrapper>\n            </style_1.SubscriptionStyle>\n        </>);\n};\nexports.default = i18n_1.withTranslation('common')(Subscription);\n//# sourceMappingURL=Subscription.jsx.map"]},"metadata":{},"sourceType":"script"}