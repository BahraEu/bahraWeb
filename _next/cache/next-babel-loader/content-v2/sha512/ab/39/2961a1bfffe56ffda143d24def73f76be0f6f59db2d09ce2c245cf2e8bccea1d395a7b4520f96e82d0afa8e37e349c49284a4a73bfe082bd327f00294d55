{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"/Users/bahra/bahra/BahraPro/node_modules/@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"/Users/bahra/bahra/BahraPro/node_modules/@babel/runtime/helpers/asyncToGenerator\");\n\nvar _slicedToArray = require(\"/Users/bahra/bahra/BahraPro/node_modules/@babel/runtime/helpers/slicedToArray\");\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getuserID = exports.isServer = exports.setDirection = exports.changeLanguage = exports.isRtl = exports.redirect = exports.checkTokenIsExpired = exports.filterHtmlProps = exports.debounce = exports.normalizeString = exports.sum = void 0;\n\nvar jsonwebtoken_1 = __importDefault(require(\"jsonwebtoken\"));\n\nvar routes_1 = require(\"../services/routes/routes\");\n\nvar cookie = __importStar(require(\"cookie\"));\n\nvar i18n_1 = require(\"../../i18n\");\n\nvar parseCookies_1 = __importDefault(require(\"./parseCookies\"));\n\nvar sum = function sum(a, b) {\n  return a + b;\n};\n\nexports.sum = sum;\n/**\n * Based on:\n * - https://stackoverflow.com/questions/20856197/remove-non-ascii-character-in-string\n * - https://gist.github.com/alisterlf/3490957\n *\n * TODO: if necessary, use a package that supports arabic, cyrillic, etc ...\n */\n\nfunction normalizeString(str) {\n  var accents = 'ÀÁÂÃÄÅĄĀāàáâãäåąßÒÓÔÕÕÖØŐòóôőõöøĎďDŽdžÈÉÊËĘèéêëęðÇçČčĆćÐÌÍÎÏĪìíîïīÙÚÛÜŰùűúûüĽĹŁľĺłÑŇŃňñńŔŕŠŚŞšśşŤťŸÝÿýŽŻŹžżźđĢĞģğ';\n  var out = 'AAAAAAAAaaaaaaaasOOOOOOOOoooooooDdDZdzEEEEEeeeeeeCcCcCcDIIIIIiiiiiUUUUUuuuuuLLLlllNNNnnnRrSSSsssTtYYyyZZZzzzdGGgg';\n  return (str || '').toLowerCase().split('').map(function (letter) {\n    var index = accents.indexOf(letter);\n    return index !== -1 ? out[index] : letter;\n  }) // remove accents\n  .join('').replace(/[^\\x00-\\x7F]/g, '') // remove non ascii chars\n  .replace(/[^\\w\\s]/gi, '').replace(/ /g, '-');\n}\n\nexports.normalizeString = normalizeString; // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n// based on https://github.com/topheman/npm-registry-browser/blob/master/src/utils/helpers.js\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function debounced() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // @ts-ignore\n    var context = this;\n\n    var later = function laterFn() {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\nexports.debounce = debounce;\n\nfunction filterHtmlProps(props) {\n  var disallow = ['i18n', 'i18nOptions', 'defaultNS', 'reportNS', 'tReady', 'innerRef', 'translationLanguageFullCode', 'defaultLanguageShortCode', 'defaultLanguageFullCode', 'switchDefaultLanguage', 'switchTranslationLanguage', 'resetTranslationLanguage'];\n  var filteredProps = {};\n  Object.entries(props).forEach(function (_ref) {\n    var _ref2 = _slicedToArray(_ref, 2),\n        key = _ref2[0],\n        value = _ref2[1];\n\n    if (!disallow.includes(key)) {\n      filteredProps[key] = value;\n    }\n  });\n  return filteredProps;\n}\n\nexports.filterHtmlProps = filterHtmlProps;\n\nfunction checkTokenIsExpired(token) {\n  var decodedToken = jsonwebtoken_1[\"default\"].decode(token);\n  return decodedToken === null || typeof decodedToken === 'string' || new Date(decodedToken.exp * 1000) < new Date();\n}\n\nexports.checkTokenIsExpired = checkTokenIsExpired;\n\nvar redirect = function redirect(context, target) {\n  if (context.res) {\n    // server\n    // 303: \"See other\"\n    context.res.writeHead(303, {\n      Location: target\n    });\n    context.res.end();\n  } else {\n    // In the browser, we just pretend like this never even happened ;)\n    routes_1.Router.replace(target);\n  }\n};\n\nexports.redirect = redirect;\nexports.isRtl = i18n_1.i18n.dir() === 'rtl' ? true : false;\n\nvar changeLanguage = function changeLanguage(_ref3) {\n  var lang = _ref3.lang,\n      currentLanguage = _ref3.currentLanguage;\n  i18n_1.i18n.changeLanguage(lang);\n\n  if (lang !== currentLanguage && lang.includes('Ar')) {\n    exports.setDirection(lang);\n    document.cookie = cookie.serialize('language', lang, {\n      maxAge: 30 * 24 * 60 * 60\n    });\n    localStorage.setItem('language', JSON.stringify(lang));\n  } else {\n    exports.setDirection(lang);\n    document.cookie = cookie.serialize('language', lang, {\n      maxAge: 30 * 24 * 60 * 60\n    });\n    localStorage.setItem('language', JSON.stringify(lang));\n  }\n};\n\nexports.changeLanguage = changeLanguage;\n\nvar setDirection = function setDirection(language) {\n  return document.getElementsByTagName('html')[0].setAttribute('dir', language === 'Arabic' ? 'rtl' : 'ltr');\n};\n\nexports.setDirection = setDirection;\nexports.isServer = false;\n\nvar getuserID = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var authToken, userID, RToken;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            authToken = null;\n            userID = null;\n            RToken = null;\n            _context.prev = 3;\n\n            if (!exports.isServer) {\n              _context.next = 8;\n              break;\n            }\n\n            _context.t0 = parseCookies_1[\"default\"]().authToken;\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.next = 10;\n            return localStorage.getItem('authToken');\n\n          case 10:\n            _context.t0 = _context.sent;\n\n          case 11:\n            authToken = _context.t0;\n            _context.next = 14;\n            return localStorage.getItem('refreshToken');\n\n          case 14:\n            RToken = _context.sent;\n            console.log(authToken, userID, RToken);\n\n            if (!exports.isServer) {\n              _context.next = 20;\n              break;\n            }\n\n            _context.t1 = parseCookies_1[\"default\"]().userID;\n            _context.next = 23;\n            break;\n\n          case 20:\n            _context.next = 22;\n            return localStorage.getItem('userID');\n\n          case 22:\n            _context.t1 = _context.sent;\n\n          case 23:\n            userID = _context.t1;\n            _context.next = 29;\n            break;\n\n          case 26:\n            _context.prev = 26;\n            _context.t2 = _context[\"catch\"](3);\n            console.log(_context.t2);\n\n          case 29:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[3, 26]]);\n  }));\n\n  return function getuserID() {\n    return _ref4.apply(this, arguments);\n  };\n}();\n\nexports.getuserID = getuserID;","map":null,"metadata":{},"sourceType":"script"}